var onnxTest=function(e,t){"use strict";function n(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((o=o.apply(e,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;class o{get runtime(){return function(e){return n(this,arguments,void 0,(function*(e,t=100){let n;for(;!e.ready;)yield new Promise((e=>{clearTimeout(n),n=setTimeout(e,t)}));clearTimeout(n)}))}(this).then((()=>this.onnx))}get globalOnnx(){return window.ort}constructor(){this.ready=!1;this.globalOnnx?this.resolve():((e,t)=>{const n=document.createElement("script");n.onload=t,n.onerror=()=>{throw new Error(`Error loading endpoint: ${e}`)},n.src=e,n.async=!0,document.body.appendChild(n)})(o.FromCDN,this.resolve.bind(this))}resolve(){this.ready=!0,this.onnx=this.globalOnnx}}o.FromCDN="https://cdn.jsdelivr.net/npm/onnxruntime-web/dist/ort.min.js";let r=(()=>{let e,r,i=[function(e,t){}],a=[],c=t.Extension;var s,l;return r=class extends c{init(e){return n(this,void 0,void 0,(function*(){this.onnx=yield(new o).runtime}))}defineBlocks(){return{test:{type:t.BlockType.Command,text:"eee",operation:()=>n(this,void 0,void 0,(function*(){try{const{InferenceSession:e,Tensor:t}=this.onnx,n=yield e.create(`${location.href}/static/model.onnx`),o=Float32Array.from([1,2,3,4,5,6,7,8,9,10,11,12]),r=Float32Array.from([10,20,30,40,50,60,70,80,90,100,110,120]),i=new t("float32",o,[3,4]),a={a:i,b:new t("float32",r,[4,3])},c=(yield n.run(a)).c.data;console.log(c)}catch(e){console.error(`failed to inference ONNX model: ${e}.`)}}))}}}},s=r,l="ExtensionNameGoesHere",Object.defineProperty(s,"name",{configurable:!0,value:l}),(()=>{var t;const n="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(t=c[Symbol.metadata])&&void 0!==t?t:null):void 0;!function(e,t,n,o,r,i){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var c,s=o.kind,l="getter"===s?"get":"setter"===s?"set":"value",u=!t&&e?o.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,o.name):{}),f=!1,m=n.length-1;m>=0;m--){var h={};for(var p in o)h[p]="access"===p?{}:o[p];for(var p in o.access)h.access[p]=o.access[p];h.addInitializer=function(e){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(e||null))};var y=(0,n[m])("accessor"===s?{get:d.get,set:d.set}:d[l],h);if("accessor"===s){if(void 0===y)continue;if(null===y||"object"!=typeof y)throw new TypeError("Object expected");(c=a(y.get))&&(d.get=c),(c=a(y.set))&&(d.set=c),(c=a(y.init))&&r.unshift(c)}else(c=a(y))&&("field"===s?r.unshift(c):d[l]=c)}u&&Object.defineProperty(u,o.name,d),f=!0}(null,e={value:r},i,{kind:"class",name:r.name,metadata:n},null,a),r=e.value,n&&Object.defineProperty(r,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n}),function(e,t,n){for(var o=arguments.length>2,r=0;r<t.length;r++)n=o?t[r].call(e,n):t[r].call(e)}(r,a)})(),r})();return e.Extension=r,e}({},ExtensionFramework);//# sourceMappingURL=onnxTest.js.map
