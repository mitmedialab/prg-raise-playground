var raiseprg45grpconference=function(e,t){"use strict";function o(e,t,o,s,r,n){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var i,l=s.kind,c="getter"===l?"get":"setter"===l?"set":"value",h=e?s.static?e:e.prototype:null,d=h?Object.getOwnPropertyDescriptor(h,s.name):{},g=!1,f=o.length-1;f>=0;f--){var p={};for(var u in s)p[u]="access"===u?{}:s[u];for(var u in s.access)p.access[u]=s.access[u];p.addInitializer=function(e){if(g)throw new TypeError("Cannot add initializers after decoration has completed");n.push(a(e||null))};var _=(0,o[f])("accessor"===l?{get:d.get,set:d.set}:d[c],p);if("accessor"===l){if(void 0===_)continue;if(null===_||"object"!=typeof _)throw new TypeError("Object expected");(i=a(_.get))&&(d.get=i),(i=a(_.set))&&(d.set=i),(i=a(_.init))&&r.unshift(i)}else(i=a(_))&&("field"===l?r.unshift(i):d[c]=i)}h&&Object.defineProperty(h,s.name,d),g=!0}"function"==typeof SuppressedError&&SuppressedError;const s={name:"RAISE Conference",description:"Replace me with a description of your extension",iconURL:"Replace with the name of your icon image file (which should be placed in the same directory as this file)",insetIconURL:"Replace with the name of your inset icon image file (which should be placed in the same directory as this file)"};let r=(()=>{var e;let r,n,a=t.extension(s),i=[];return e=class extends a{constructor(){super(...arguments),this.password=function(e,t,o){for(var s=arguments.length>2,r=0;r<t.length;r++)o=s?t[r].call(e,o):t[r].call(e);return s?o:void 0}(this,i)}init(e){this.challengePassed=!1,this.exampleField=0,this.password="",this.env=e,this.currentTarget=this.env.runtime._editingTarget,this.levelMap={0:"sdkkdjj",1:"aliceInWonderland",2:"kjsdkjfk",3:"sjksddka",4:"jdksldf",5:"jdkslsld"};const t=new URL(window.location.href),o=new URLSearchParams(t.search);console.log("params",o.get("level"));const s=o.get("level");this.level=s,this.sizeMap={},e.runtime.on("PROJECT_RUN_STOP",(()=>{if("storyTime"==s&&this.storyTime()&&(this.challengePassed=!0),"aliceInWonderland"==s&&this.aliceSprite){this.aliceSprite.size-this.sizeMap[this.aliceSprite.sprite.name]==100&&this.aliceInWonderland()&&(this.challengePassed=!0)}"dancingSprite"==s&&this.dancingSprite()&&(this.challengePassed=!0),"followNose"==s&&this.followNose()&&(this.challengePassed=!0)})),e.runtime.on("PROJECT_RUN_START",(()=>{console.log("PROJECT STARTED"),this.populateSizeArray(),this.aliceInWonderland()}));for(const t of e.runtime.targets)t.isStage&&(this.stage=t)}showPassword(e){const t=this.getPosition(e);return console.log(t),"poseFace"==this.level?this.detectSmile()?"HEY":"NO":this.challengePassed?"followNose"==this.level?t[0]>150&&t[1]>150?"HEY":"NO":"HEY":"NO"}getStats(){console.log(this.currentTarget),this.detectStacks(this.currentTarget),this.storyTime()}storyTime(){const e=[["looks_sayforsecs","looks_sayforsecs"],["looks_say","control_wait","looks_say","control_wait"],["event_whenflagclicked","looks_sayforsecs","looks_sayforsecs"],["event_whenflagclicked","looks_say","control_wait","looks_say","control_wait"]],t=[["looks_sayforsecs","looks_sayforsecs"],["control_wait","looks_say","control_wait","looks_say"],["event_whenflagclicked","looks_sayforsecs","looks_sayforsecs"],["event_whenflagclicked","control_wait","looks_say","control_wait","looks_say"]],o=this.getTargets(),s={one:!1,two:!1};for(const r of o){if("Stage"!=r.sprite.name){console.log(r.sprite.name);const o=this.detectStacks(r),n=o.length>0&&this.hasCommonArray(o,e),a=o.length>0&&this.hasCommonArray(o,t);s.one=!!n&&(!n||!a),s.two=!!a&&(!n||!a)}}return s.one&&s.two}aliceInWonderland(){const e=[["event_whenflagclicked","control_repeat","looks_changesizeby"],["control_repeat","looks_changesizeby"]];let t=!1;const o=this.getTargets();for(const s of o){if("Stage"!=s.sprite.name){console.log(s.sprite.name);const o=this.detectStacks(s);t=o.length>0&&this.hasCommonArray(o,e),t&&(this.aliceSprite=s)}}return t}dancingSprite(){const e=[["event_whenflagclicked","sound_play","control_forever","control_wait","looks_nextcostume"],["sound_play","control_forever","control_wait","looks_nextcostume"]],t=this.getTargets();let o=!1;for(const s of t){if("Stage"!=s.sprite.name){console.log(s.sprite.name);const t=this.detectStacks(s),r=t.length>0&&this.hasCommonArray(t,e),n=this.getCostumeLength(s)>1;o=r&&n}}return o}followNose(){const e=[["event_whenflagclicked","control_forever","control_wait","poseBody_goToPart"],["event_whenflagclicked","control_forever","poseBody_goToPart","control_wait"],["event_whenflagclicked","control_forever","poseBody_goToPart"],["control_forever","poseBody_goToPart"],["control_forever","poseBody_goToPart","control_wait"],["control_forever","control_wait","poseBody_goToPart"]],t=this.getTargets();let o=!1;for(const s of t){if("Stage"!=s.sprite.name){console.log(s.sprite.name);const t=this.detectStacks(s);o=t.length>0&&this.hasCommonArray(t,e)}}return o}detectSmile(){const e=[["poseFace_affdexWhenExpression","looks_sayforsecs"]],t=this.getTargets();let o=!1;for(const s of t){if("Stage"!=s.sprite.name){console.log(s.sprite.name);const t=this.detectStacks(s);o=t.length>0&&this.hasCommonArray(t,e)}}return o}detectStacks(e){const t=[],o=e.blocks._scripts,s=e.blocks._blocks;console.log("blocks",s);for(const e of o){const o=[];let r=s[e];if(o.push(r.opcode),"control_forever"==r.opcode||"control_repeat"==r.opcode){let e=r.inputs.SUBSTACK.block;r.next=e}for(;r.next;)if(r=s[r.next],o.push(r.opcode),"control_forever"==r.opcode||"control_repeat"==r.opcode){let e=r.inputs.SUBSTACK.block;r.next=e}t.push(o)}return console.log("ALL STACKS",t),t}getIfCondition(e,t){let o=t[e].inputs.CONDITION.block;if(o=t[o],"operator_gt"==o.opcode){const e=t[o.inputs.OPERAND1.block];t[o.inputs.OPERAND2.block],e.opcode}}getCostumeLength(e){return e.sprite.costumes.length}getPosition(e){return[e.thread.target.x,e.thread.target.y]}getTargets(){return this.env.runtime.targets}arraysEqual(e,t){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}hasCommonArray(e,t){console.log(e);for(let o=0;o<e.length;o++)for(let s=0;s<t.length;s++)if(this.arraysEqual(e[o],t[s]))return!0;return!1}populateSizeArray(){const e=this.getTargets();for(const t of e){const e=t.sprite.name,o=t.size;this.sizeMap[e]=o}}},(()=>{var s;const l="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(s=a[Symbol.metadata])&&void 0!==s?s:null):void 0;r=[t.scratch.reporter`Show password`],n=[t.scratch.reporter`Get stats`],o(e,0,r,{kind:"method",name:"showPassword",static:!1,private:!1,access:{has:e=>"showPassword"in e,get:e=>e.showPassword},metadata:l},null,i),o(e,0,n,{kind:"method",name:"getStats",static:!1,private:!1,access:{has:e=>"getStats"in e,get:e=>e.getStats},metadata:l},null,i),l&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})})(),e})();return e.Extension=r,e}({},ExtensionFramework);//# sourceMappingURL=raiseprg45grpconference.js.map
