var raiseprg45grpconference=function(e,t){"use strict";function o(e,t,o,s,n,l){function r(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,i=s.kind,c="getter"===i?"get":"setter"===i?"set":"value",d=e?s.static?e:e.prototype:null,h=d?Object.getOwnPropertyDescriptor(d,s.name):{},g=!1,f=o.length-1;f>=0;f--){var p={};for(var _ in s)p[_]="access"===_?{}:s[_];for(var _ in s.access)p.access[_]=s.access[_];p.addInitializer=function(e){if(g)throw new TypeError("Cannot add initializers after decoration has completed");l.push(r(e||null))};var u=(0,o[f])("accessor"===i?{get:h.get,set:h.set}:h[c],p);if("accessor"===i){if(void 0===u)continue;if(null===u||"object"!=typeof u)throw new TypeError("Object expected");(a=r(u.get))&&(h.get=a),(a=r(u.set))&&(h.set=a),(a=r(u.init))&&n.unshift(a)}else(a=r(u))&&("field"===i?n.unshift(a):h[c]=a)}d&&Object.defineProperty(d,s.name,h),g=!0}"function"==typeof SuppressedError&&SuppressedError;const s={name:"RAISE Conference",description:"Replace me with a description of your extension",iconURL:"Replace with the name of your icon image file (which should be placed in the same directory as this file)",insetIconURL:"Replace with the name of your inset icon image file (which should be placed in the same directory as this file)"};let n=(()=>{var e;let n,l,r=t.extension(s),a=[];return e=class extends r{constructor(){super(...arguments),this.password=function(e,t,o){for(var s=arguments.length>2,n=0;n<t.length;n++)o=s?t[n].call(e,o):t[n].call(e);return s?o:void 0}(this,a)}init(e){this.challengePassed=!1,this.exampleField=0,this.password="",this.env=e,this.currentTarget=this.env.runtime._editingTarget,this.passwordMap={storyTime:"aliceInWonderland",aliceInWonderland:"dancingSprite",dancingSprite:"detectSmile",detectSmile:"followHand",followHand:"textClassification",textClassification:"You finished!"};const t=new URL(window.location.href),o=new URLSearchParams(t.search);console.log("params",o.get("level"));const s=o.get("level");this.level=s,this.sizeMap={},e.runtime.on("PROJECT_RUN_STOP",(()=>{if("storyTime"==s&&this.storyTime()&&(this.challengePassed=!0),"textClassification"==s&&this.textClassification()&&(this.challengePassed=!0),"aliceInWonderland"==s&&this.aliceSprite){this.aliceSprite.size-this.sizeMap[this.aliceSprite.sprite.name]==100&&this.aliceInWonderland()&&(this.challengePassed=!0)}})),e.runtime.on("PROJECT_RUN_START",(()=>{this.populateSizeArray(),this.aliceInWonderland(),"dancingSprite"==s&&this.dancingSprite()&&(this.challengePassed=!0)}));for(const t of e.runtime.targets)t.isStage&&(this.stage=t)}showPassword(e){const t=this.getPosition(e);return"detectSmile"==this.level?this.detectSmile()?this.passwordMap[this.level]:"NO":"followHand"==this.level?this.followHand()?(console.log(t[0],t[1]),t[0]>150&&t[1]>100?this.passwordMap[this.level]:"NO"):"NO":this.challengePassed?this.passwordMap[this.level]:"NO"}getStats(){console.log(this.currentTarget),this.detectStacks(this.currentTarget),this.storyTime()}storyTime(){const e=[["event_whenflagclicked","looks_say","control_wait","looks_say","control_wait"],["event_whenflagclicked","looks_say","control_wait","looks_sayforsecs","control_wait"],["event_whenflagclicked","looks_sayforsecs","control_wait","looks_say","control_wait"],["event_whenflagclicked","looks_sayforsecs","control_wait","looks_sayforsecs","control_wait"]],t=[["event_whenflagclicked","control_wait","looks_say","control_wait","looks_say"],["event_whenflagclicked","control_wait","looks_say","control_wait","looks_sayforsecs"],["event_whenflagclicked","control_wait","looks_sayforsecs","control_wait","looks_say"],["event_whenflagclicked","control_wait","looks_sayforsecs","control_wait","looks_sayforsecs"]],o=this.getTargets(),s={one:!1,two:!1};console.log(o);for(const n of o){if("Stage"!=n.sprite.name){console.log(n.sprite.name);const o=this.detectStacks(n),l=o.length>0&&this.hasCommonArray(o,e),r=o.length>0&&this.hasCommonArray(o,t);s.one=!!s.one||!!l&&(!l||!r),s.two=!!s.two||!!r&&(!l||!r)}}return console.log(s),s.one&&s.two}aliceInWonderland(){const e=[["event_whenflagclicked","control_repeat","looks_changesizeby"],["control_repeat","looks_changesizeby"]];let t=!1;const o=this.getTargets();for(const s of o){if("Stage"!=s.sprite.name){console.log(s.sprite.name);const o=this.detectStacks(s);t=o.length>0&&this.hasCommonArray(o,e),t&&(this.aliceSprite=s)}}return t}dancingSprite(){const e=[["event_whenflagclicked","sound_play","control_forever","control_wait","looks_nextcostume"],["sound_play","control_forever","control_wait","looks_nextcostume"],["event_whenflagclicked","sound_play","control_forever","looks_nextcostume","control_wait"],["sound_play","control_forever","looks_nextcostume","control_wait"],["event_whenflagclicked","sound_play","control_repeat","control_wait","looks_nextcostume"],["sound_play","control_repeat","control_wait","looks_nextcostume"],["event_whenflagclicked","sound_play","control_repeat","looks_nextcostume","control_wait"],["sound_play","control_repeat","looks_nextcostume","control_wait"]],t=this.getTargets();let o=!1;for(const s of t){if("Stage"!=s.sprite.name){console.log(s.sprite.name);const t=this.detectStacks(s),n=t.length>0&&this.hasCommonArray(t,e),l=this.getCostumeLength(s)>1;console.log(n,l),o=n&&l}}return o}followHand(){const e=[["event_whenflagclicked","control_forever","control_wait","poseHand_goToHandPart"],["event_whenflagclicked","control_forever","poseHand_goToHandPart","control_wait"],["event_whenflagclicked","control_forever","poseHand_goToHandPart"],["control_forever","poseHand_goToHandPart"],["control_forever","poseHand_goToHandPart","control_wait"],["control_forever","control_wait","poseHand_goToHandPart"]],t=this.getTargets();let o=!1;for(const s of t){if("Stage"!=s.sprite.name){console.log(s.sprite.name);const t=this.detectStacks(s);o=t.length>0&&this.hasCommonArray(t,e)}}return o}detectSmile(){const e=[["poseFace_affdexWhenExpression","looks_sayforsecs"]],t=this.getTargets();let o=!1;for(const s of t){if("Stage"!=s.sprite.name){console.log(s.sprite.name);const t=this.detectStacks(s);o=t.length>0&&this.hasCommonArray(t,e)}}return o}textClassification(){const e=[["sensing_askandwait","control_if","id","looks_sayforsecs"],["event_whenflagclicked","sensing_askandwait","control_if","id","looks_sayforsecs"],["sensing_askandwait","control_if_else","id","looks_sayforsecs"],["event_whenflagclicked","sensing_askandwait","control_if_else","id","looks_sayforsecs"]],t=this.getTargets();let o=!1;for(const s of t){if("Stage"!=s.sprite.name){console.log(s.sprite.name);const t=this.detectStacks(s),n=t.length>0&&this.hasCommonArray(t,e),l=n?t[this.getCommonArray(t,e)]:[];console.log(l);const r=l.find((e=>e.includes("id---")));console.log(r);const a=!!r&&this.getIfCondition(r.replace(/^id---/,""),this.getBlocks(s));o=n&&a}}return o}getBlocks(e){return e.blocks._blocks}detectStacks(e){const t=[],o=e.blocks._scripts,s=e.blocks._blocks;console.log("blocks",s);for(const e of o){const o=[];let n=s[e];if(o.push(n.opcode),"control_forever"==n.opcode||"control_repeat"==n.opcode){let e=n.inputs.SUBSTACK?n.inputs.SUBSTACK.block:null;n.next=e}for(;n.next;){if(n=s[n.next],o.push(n.opcode),"control_if"==n.opcode||"control_if_else"==n.opcode){o.push(`id---${n.id}`);let e=n.inputs.SUBSTACK?n.inputs.SUBSTACK.block:null;n.next=e}if("control_forever"==n.opcode||"control_repeat"==n.opcode){let e=n.inputs.SUBSTACK?n.inputs.SUBSTACK.block:null;n.next=e}}t.push(o)}return console.log("ALL STACKS",t),t}getIfCondition(e,t){let o,s,n=t[e].inputs.CONDITION.block;n=n?t[n]:null;let l=!1,r=!1;if(console.log(n),console.log(n.inputs),console.log(n.inputs.OPERAND1),n&&"operator_gt"==n.opcode?(o=n.inputs.OPERAND1.block,console.log(o),o=o?t[o]:null,console.log(o),s=n.inputs.OPERAND2.block,console.log(s),s=s?t[s]:null,console.log(s),console.log("one")):n&&"operator_lt"==n.opcode&&(o=n.inputs.OPERAND2.block,o=o?t[o]:null,s=n.inputs.OPERAND1.block,s=s?t[s]:null),console.log(o,s),o&&"textClassification_sentimentScore"==o.opcode){console.log("passed 1");let e=o.inputs.TEXT.block;e=e?t[e]:null,e&&"sensing_answer"==e.opcode&&(console.log("passed 2"),l=!0)}return s&&"text"==s.opcode&&(console.log("passed 3"),"0"==s.fields.TEXT.value&&(console.log("passed 4"),r=!0)),console.log("operand1",l,"operand2",r),l&&r}getCostumeLength(e){return e.sprite.costumes.length}getPosition(e){return[e.thread.target.x,e.thread.target.y]}getTargets(){return this.env.runtime.targets}arraysEqual(e,t){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(e[o]!==t[o])if("id"==e[o]&&t[o].includes("id---"));else if("id"!=t[o]||!e[o].includes("id---"))return!1;return!0}hasCommonArray(e,t){console.log(e);for(let o=0;o<e.length;o++)for(let s=0;s<t.length;s++)if(this.arraysEqual(e[o],t[s]))return!0;return!1}getCommonArray(e,t){console.log(e);for(let o=0;o<e.length;o++)for(let s=0;s<t.length;s++)if(this.arraysEqual(e[o],t[s]))return o;return!1}populateSizeArray(){const e=this.getTargets();for(const t of e){const e=t.sprite.name,o=t.size;this.sizeMap[e]=o}}},(()=>{var s;const i="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(s=r[Symbol.metadata])&&void 0!==s?s:null):void 0;n=[t.scratch.reporter`Show password`],l=[t.scratch.reporter`Get stats`],o(e,0,n,{kind:"method",name:"showPassword",static:!1,private:!1,access:{has:e=>"showPassword"in e,get:e=>e.showPassword},metadata:i},null,a),o(e,0,l,{kind:"method",name:"getStats",static:!1,private:!1,access:{has:e=>"getStats"in e,get:e=>e.getStats},metadata:i},null,a),i&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:i})})(),e})();return e.Extension=n,e}({},ExtensionFramework);//# sourceMappingURL=raiseprg45grpconference.js.map
