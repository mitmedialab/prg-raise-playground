var raiseprg45grpconference=function(e,o){"use strict";function t(e,o,t,s,n,r){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var i,a=s.kind,c="getter"===a?"get":"setter"===a?"set":"value",h=e?s.static?e:e.prototype:null,d=h?Object.getOwnPropertyDescriptor(h,s.name):{},g=!1,f=t.length-1;f>=0;f--){var p={};for(var u in s)p[u]="access"===u?{}:s[u];for(var u in s.access)p.access[u]=s.access[u];p.addInitializer=function(e){if(g)throw new TypeError("Cannot add initializers after decoration has completed");r.push(l(e||null))};var _=(0,t[f])("accessor"===a?{get:d.get,set:d.set}:d[c],p);if("accessor"===a){if(void 0===_)continue;if(null===_||"object"!=typeof _)throw new TypeError("Object expected");(i=l(_.get))&&(d.get=i),(i=l(_.set))&&(d.set=i),(i=l(_.init))&&n.unshift(i)}else(i=l(_))&&("field"===a?n.unshift(i):d[c]=i)}h&&Object.defineProperty(h,s.name,d),g=!0}"function"==typeof SuppressedError&&SuppressedError;const s={name:"RAISE Conference",description:"Replace me with a description of your extension",iconURL:"Replace with the name of your icon image file (which should be placed in the same directory as this file)",insetIconURL:"Replace with the name of your inset icon image file (which should be placed in the same directory as this file)"};let n=(()=>{var e;let n,r,l=o.extension(s),i=[];return e=class extends l{constructor(){super(...arguments),this.password=function(e,o,t){for(var s=arguments.length>2,n=0;n<o.length;n++)t=s?o[n].call(e,t):o[n].call(e);return s?t:void 0}(this,i)}init(e){this.challengePassed=!1,this.exampleField=0,this.password="",this.env=e,this.currentTarget=this.env.runtime._editingTarget,this.levelMap={0:"sdkkdjj",1:"aliceInWonderland",2:"kjsdkjfk",3:"sjksddka",4:"jdksldf",5:"jdkslsld"};const o=new URL(window.location.href),t=new URLSearchParams(o.search);console.log("params",t.get("level"));const s=t.get("level");this.level=s,this.sizeMap={},e.runtime.on("PROJECT_RUN_STOP",(()=>{if("storyTime"==s&&this.storyTime()&&(this.challengePassed=!0),"textClassification"==s&&this.textClassification()&&(this.challengePassed=!0,console.log("VERY GOOD")),"aliceInWonderland"==s&&this.aliceSprite){this.aliceSprite.size-this.sizeMap[this.aliceSprite.sprite.name]==100&&this.aliceInWonderland()&&(this.challengePassed=!0)}"dancingSprite"==s&&this.dancingSprite()&&(this.challengePassed=!0),"followNose"==s&&this.followNose()&&(this.challengePassed=!0)})),e.runtime.on("PROJECT_RUN_START",(()=>{console.log("PROJECT STARTED"),this.populateSizeArray(),this.aliceInWonderland()}));for(const o of e.runtime.targets)o.isStage&&(this.stage=o)}showPassword(e){const o=this.getPosition(e);return console.log(o),"poseFace"==this.level?this.detectSmile()?"HEY":"NO":this.challengePassed?"followNose"==this.level?o[0]>150&&o[1]>150?"HEY":"NO":"HEY":"NO"}getStats(){console.log(this.currentTarget),this.detectStacks(this.currentTarget),this.storyTime()}storyTime(){const e=[["looks_sayforsecs","looks_sayforsecs"],["looks_say","control_wait","looks_say","control_wait"],["event_whenflagclicked","looks_sayforsecs","looks_sayforsecs"],["event_whenflagclicked","looks_say","control_wait","looks_say","control_wait"]],o=[["looks_sayforsecs","looks_sayforsecs"],["control_wait","looks_say","control_wait","looks_say"],["event_whenflagclicked","looks_sayforsecs","looks_sayforsecs"],["event_whenflagclicked","control_wait","looks_say","control_wait","looks_say"]],t=this.getTargets(),s={one:!1,two:!1};for(const n of t){if("Stage"!=n.sprite.name){console.log(n.sprite.name);const t=this.detectStacks(n),r=t.length>0&&this.hasCommonArray(t,e),l=t.length>0&&this.hasCommonArray(t,o);s.one=!!r&&(!r||!l),s.two=!!l&&(!r||!l)}}return s.one&&s.two}aliceInWonderland(){const e=[["event_whenflagclicked","control_repeat","looks_changesizeby"],["control_repeat","looks_changesizeby"]];let o=!1;const t=this.getTargets();for(const s of t){if("Stage"!=s.sprite.name){console.log(s.sprite.name);const t=this.detectStacks(s);o=t.length>0&&this.hasCommonArray(t,e),o&&(this.aliceSprite=s)}}return o}dancingSprite(){const e=[["event_whenflagclicked","sound_play","control_forever","control_wait","looks_nextcostume"],["sound_play","control_forever","control_wait","looks_nextcostume"]],o=this.getTargets();let t=!1;for(const s of o){if("Stage"!=s.sprite.name){console.log(s.sprite.name);const o=this.detectStacks(s),n=o.length>0&&this.hasCommonArray(o,e),r=this.getCostumeLength(s)>1;t=n&&r}}return t}followNose(){const e=[["event_whenflagclicked","control_forever","control_wait","poseBody_goToPart"],["event_whenflagclicked","control_forever","poseBody_goToPart","control_wait"],["event_whenflagclicked","control_forever","poseBody_goToPart"],["control_forever","poseBody_goToPart"],["control_forever","poseBody_goToPart","control_wait"],["control_forever","control_wait","poseBody_goToPart"]],o=this.getTargets();let t=!1;for(const s of o){if("Stage"!=s.sprite.name){console.log(s.sprite.name);const o=this.detectStacks(s);t=o.length>0&&this.hasCommonArray(o,e)}}return t}detectSmile(){const e=[["poseFace_affdexWhenExpression","looks_sayforsecs"]],o=this.getTargets();let t=!1;for(const s of o){if("Stage"!=s.sprite.name){console.log(s.sprite.name);const o=this.detectStacks(s);t=o.length>0&&this.hasCommonArray(o,e)}}return t}textClassification(){const e=[["sensing_askandwait","control_if","id","looks_sayforsecs"],["event_whenflagclicked","sensing_askandwait","control_if","id","looks_sayforsecs"],["sensing_askandwait","control_if_else","id","looks_sayforsecs"],["event_whenflagclicked","sensing_askandwait","control_if_else","id","looks_sayforsecs"]],o=this.getTargets();let t=!1;for(const s of o){if("Stage"!=s.sprite.name){console.log(s.sprite.name);const o=this.detectStacks(s),n=o.length>0&&this.hasCommonArray(o,e),r=n?o[this.getCommonArray(o,e)]:[];console.log(r);const l=r.find((e=>e.includes("id---")));console.log(l);const i=!!l&&this.getIfCondition(l.replace(/^id---/,""),this.getBlocks(s));t=n&&i}}return t}getBlocks(e){return e.blocks._blocks}detectStacks(e){const o=[],t=e.blocks._scripts,s=e.blocks._blocks;console.log("blocks",s);for(const e of t){const t=[];let n=s[e];if(t.push(n.opcode),"control_forever"==n.opcode||"control_repeat"==n.opcode){let e=n.inputs.SUBSTACK.block;n.next=e}for(;n.next;){if(n=s[n.next],t.push(n.opcode),"control_if"==n.opcode||"control_if_else"==n.opcode){t.push(`id---${n.id}`);let e=n.inputs.SUBSTACK.block;n.next=e}if("control_forever"==n.opcode||"control_repeat"==n.opcode){let e=n.inputs.SUBSTACK.block;n.next=e}}o.push(t)}return console.log("ALL STACKS",o),o}getIfCondition(e,o){let t,s,n=o[e].inputs.CONDITION.block;n=n?o[n]:null;let r=!1,l=!1;if(console.log(n),console.log(n.inputs),console.log(n.inputs.OPERAND1),n&&"operator_gt"==n.opcode?(t=n.inputs.OPERAND1.block,console.log(t),t=t?o[t]:null,console.log(t),s=n.inputs.OPERAND2.block,console.log(s),s=s?o[s]:null,console.log(s),console.log("one")):n&&"operator_lt"==n.opcode&&(t=n.inputs.OPERAND2.block,t=t?o[t]:null,s=n.inputs.OPERAND1.block,s=s?o[s]:null),console.log(t,s),t&&"textClassification_sentimentScore"==t.opcode){console.log("passed 1");let e=t.inputs.TEXT.block;e=e?o[e]:null,e&&"sensing_answer"==e.opcode&&(console.log("passed 2"),r=!0)}return s&&"text"==s.opcode&&(console.log("passed 3"),"0"==s.fields.TEXT.value&&(console.log("passed 4"),l=!0)),console.log("operand1",r,"operand2",l),r&&l}getCostumeLength(e){return e.sprite.costumes.length}getPosition(e){return[e.thread.target.x,e.thread.target.y]}getTargets(){return this.env.runtime.targets}arraysEqual(e,o){if(e.length!==o.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==o[t])if("id"==e[t]&&o[t].includes("id---"));else if("id"!=o[t]||!e[t].includes("id---"))return!1;return!0}hasCommonArray(e,o){console.log(e);for(let t=0;t<e.length;t++)for(let s=0;s<o.length;s++)if(this.arraysEqual(e[t],o[s]))return!0;return!1}getCommonArray(e,o){console.log(e);for(let t=0;t<e.length;t++)for(let s=0;s<o.length;s++)if(this.arraysEqual(e[t],o[s]))return t;return!1}populateSizeArray(){const e=this.getTargets();for(const o of e){const e=o.sprite.name,t=o.size;this.sizeMap[e]=t}}},(()=>{var s;const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(s=l[Symbol.metadata])&&void 0!==s?s:null):void 0;n=[o.scratch.reporter`Show password`],r=[o.scratch.reporter`Get stats`],t(e,0,n,{kind:"method",name:"showPassword",static:!1,private:!1,access:{has:e=>"showPassword"in e,get:e=>e.showPassword},metadata:a},null,i),t(e,0,r,{kind:"method",name:"getStats",static:!1,private:!1,access:{has:e=>"getStats"in e,get:e=>e.getStats},metadata:a},null,i),a&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})})(),e})();return e.Extension=n,e}({},ExtensionFramework);//# sourceMappingURL=raiseprg45grpconference.js.map
