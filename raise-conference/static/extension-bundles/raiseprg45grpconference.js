var raiseprg45grpconference=function(e,t){"use strict";function o(){}function n(e){return e()}function s(){return Object.create(null)}function l(e){e.forEach(n)}function r(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(e,t){e.appendChild(t)}function c(e,t,o){const n=function(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;if(t&&t.host)return t;return e.ownerDocument}(e);if(!n.getElementById(t)){const e=p("style");e.id=t,e.textContent=o,function(e,t){a(e.head||e,t),t.sheet}(n,e)}}function d(e,t,o){e.insertBefore(t,o||null)}function u(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e){return document.createElement(e)}function f(e){return document.createTextNode(e)}function h(){return f(" ")}function g(e,t,o,n){return e.addEventListener(t,o,n),()=>e.removeEventListener(t,o,n)}function m(e,t,o){null==o?e.removeAttribute(t):e.getAttribute(t)!==o&&e.setAttribute(t,o)}function _(e,t){e.value=null==t?"":t}function w(e,t,o,n){null==o?e.style.removeProperty(t):e.style.setProperty(t,o,"")}function v(e,t,o){e.classList.toggle(t,!!o)}let y;function k(e){y=e}const b=[],x=[];let S=[];const $=[],C=Promise.resolve();let T=!1;function P(e){S.push(e)}const A=new Set;let E=0;function I(){if(0!==E)return;const e=y;do{try{for(;E<b.length;){const e=b[E];E++,k(e),O(e.$$)}}catch(e){throw b.length=0,E=0,e}for(k(null),b.length=0,E=0;x.length;)x.pop()();for(let e=0;e<S.length;e+=1){const t=S[e];A.has(t)||(A.add(t),t())}S.length=0}while(b.length);for(;$.length;)$.pop()();T=!1,A.clear(),k(e)}function O(e){if(null!==e.fragment){e.update(),l(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(P)}}const j=new Set;function H(e,t){const o=e.$$;null!==o.fragment&&(!function(e){const t=[],o=[];S.forEach((n=>-1===e.indexOf(n)?t.push(n):o.push(n))),o.forEach((e=>e())),S=t}(o.after_update),l(o.on_destroy),o.fragment&&o.fragment.d(t),o.on_destroy=o.fragment=null,o.ctx=[])}function z(e,t){-1===e.$$.dirty[0]&&(b.push(e),T||(T=!0,C.then(I)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function L(e,t,i,a,c,d,p=null,f=[-1]){const h=y;k(e);const g=e.$$={fragment:null,ctx:[],props:d,update:o,not_equal:c,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(h?h.$$.context:[])),callbacks:s(),dirty:f,skip_bound:!1,root:t.target||h.$$.root};p&&p(g.root);let m=!1;if(g.ctx=i?i(e,t.props||{},((t,o,...n)=>{const s=n.length?n[0]:o;return g.ctx&&c(g.ctx[t],g.ctx[t]=s)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](s),m&&z(e,t)),o})):[],g.update(),m=!0,l(g.before_update),g.fragment=!!a&&a(g.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);g.fragment&&g.fragment.l(e),e.forEach(u)}else g.fragment&&g.fragment.c();t.intro&&((_=e.$$.fragment)&&_.i&&(j.delete(_),_.i(w))),function(e,t,o){const{fragment:s,after_update:i}=e.$$;s&&s.m(t,o),P((()=>{const t=e.$$.on_mount.map(n).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...t):l(t),e.$$.on_mount=[]})),i.forEach(P)}(e,t.target,t.anchor),I()}var _,w;k(h)}class N{$$=void 0;$$set=void 0;$destroy(){H(this,1),this.$destroy=o}$on(e,t){if(!r(t))return o;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function R(e){c(e,"svelte-1u1bs96",".container.svelte-1u1bs96{text-align:center;padding:30px}input.svelte-1u1bs96{display:block;margin:10px auto;padding:8px;width:80%}button.svelte-1u1bs96{margin:10px;padding:10px 20px}button.svelte-1u1bs96:disabled{background-color:#ccc;color:#777;cursor:not-allowed}")}function q(e){let n,s,i,c,y,k,b,x,S,$,C,T;return{c(){n=p("div"),s=p("h2"),s.textContent="What's the password???",i=h(),c=p("input"),y=h(),k=p("button"),b=f("Open Next Challenge"),S=h(),$=p("button"),$.textContent="Cancel",m(c,"type","password"),m(c,"placeholder","Password"),m(c,"class","svelte-1u1bs96"),k.disabled=x=!e[2],m(k,"class","svelte-1u1bs96"),m($,"class","svelte-1u1bs96"),m(n,"class","svelte-1u1bs96"),v(n,"container",e[3]),w(n,"width","360px"),w(n,"background-color",t.color.ui.white),w(n,"color",t.color.text.primary)},m(t,o){d(t,n,o),a(n,s),a(n,i),a(n,c),_(c,e[1]),a(n,y),a(n,k),a(k,b),a(n,S),a(n,$),C||(T=[g(c,"input",e[7]),g(k,"click",e[4]),g($,"click",(function(){r(e[0])&&e[0].apply(this,arguments)}))],C=!0)},p(t,[o]){e=t,2&o&&c.value!==e[1]&&_(c,e[1]),4&o&&x!==(x=!e[2])&&(k.disabled=x)},i:o,o:o,d(e){e&&u(n),C=!1,l(T)}}}function U(e,o,n){let s;var l;let{extension:r}=o,{close:i}=o;const a=t.activeClass;let c="";const d={storyTime:"aliceInWonderland",aliceInWonderland:"dancingSprite",dancingSprite:"detectSmile",detectSmile:"followHand",followHand:"textClassification",textClassification:"You finished!"},u={storyTime:"https://playground.raise.mit.edu/raise-conference/?level=aliceInWonderland&project=https://www.dropbox.com/scl/fi/ptjjvcqh4hlhgdqfusgrn/growingAlien.sb3?rlkey=vomdmj7y6jnx6vmjc6kc49x8f&st=e3ehc439&dl=0",aliceInWonderland:"https://playground.raise.mit.edu/raise-conference/?level=dancingSprite&project=https://www.dropbox.com/scl/fi/3e2x09nq6at2tsi0vpdmb/ballerina.sb3?rlkey=07pgqu4l5ua04lqe81kgws9no&st=3ph4nusm&dl=0",dancingSprite:"https://playground.raise.mit.edu/raise-conference/?level=detectSmile&project=https://www.dropbox.com/scl/fi/3tudm9qq1spkunk1buc8h/beautifulSmile.sb3?rlkey=3okdy34lxvb662ib4z7ky9hpf&st=dbr9c883&dl=0",detectSmile:"https://playground.raise.mit.edu/raise-conference/?level=followHand&project=https://www.dropbox.com/scl/fi/ez1nd8uwnk9ud5r89v018/followHand.sb3?rlkey=s90ftjlmhnxooytu085dexoxx&st=5biqx8v5&dl=0",followHand:"https://playground.raise.mit.edu/raise-conference/?level=textClassification&project=https://www.dropbox.com/scl/fi/srw0kpkmv45dpm3x4rdqj/textClassification.sb3?rlkey=ktv66sfucfzz6vfj1qswd7h2z&st=o4ebwpfa&dl=0",textClassification:"You finished!"};return e.$$set=e=>{"extension"in e&&n(5,r=e.extension),"close"in e&&n(0,i=e.close)},e.$$.update=()=>{98&e.$$.dirty&&n(2,s=(null===n(6,l=d[r.level])||void 0===l?void 0:l.trim())===c.trim())},[i,c,s,a,function(){const e=u[r.level];e&&s&&window.open(e,"_blank")},r,l,function(){c=this.value,n(1,c)}]}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");function W(e){c(e,"svelte-1z0o0so",".container.svelte-1z0o0so{text-align:center;padding:30px}")}function B(e){let n,s,l,r,i,c,g,_=e[0].name+"";return{c(){n=p("div"),s=p("h1"),s.textContent="Hello, world!",l=h(),r=p("h2"),i=f("I am "),c=f(_),g=f("."),m(n,"class","svelte-1z0o0so"),v(n,"container",e[1]),w(n,"width","360px"),w(n,"background-color",t.color.ui.white),w(n,"color",t.color.text.primary)},m(e,t){d(e,n,t),a(n,s),a(n,l),a(n,r),a(r,i),a(r,c),a(r,g)},p(e,[t]){1&t&&_!==(_=e[0].name+"")&&function(e,t){t=""+t,e.data!==t&&(e.data=t)}(c,_)},i:o,o:o,d(e){e&&u(n)}}}function D(e,o,n){let{extension:s}=o,{close:l}=o;const r=t.activeClass;return e.$$set=e=>{"extension"in e&&n(0,s=e.extension),"close"in e&&n(2,l=e.close)},[s,r,l]}function M(e,t,o,n,s,l){function r(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var i,a=n.kind,c="getter"===a?"get":"setter"===a?"set":"value",d=e?n.static?e:e.prototype:null,u=d?Object.getOwnPropertyDescriptor(d,n.name):{},p=!1,f=o.length-1;f>=0;f--){var h={};for(var g in n)h[g]="access"===g?{}:n[g];for(var g in n.access)h.access[g]=n.access[g];h.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");l.push(r(e||null))};var m=(0,o[f])("accessor"===a?{get:u.get,set:u.set}:u[c],h);if("accessor"===a){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(i=r(m.get))&&(u.get=i),(i=r(m.set))&&(u.set=i),(i=r(m.init))&&s.unshift(i)}else(i=r(m))&&("field"===a?s.unshift(i):u[c]=i)}d&&Object.defineProperty(d,n.name,u),p=!0}"function"==typeof SuppressedError&&SuppressedError;const K={name:"RAISE Conference",description:"Replace me with a description of your extension",iconURL:"Replace with the name of your icon image file (which should be placed in the same directory as this file)",insetIconURL:"Replace with the name of your inset icon image file (which should be placed in the same directory as this file)"};let F=(()=>{var e;let o,n,s,l,r,i=t.extension(K,"ui"),a=[];return e=class extends i{constructor(){super(...arguments),this.password=function(e,t,o){for(var n=arguments.length>2,s=0;s<t.length;s++)o=n?t[s].call(e,o):t[s].call(e);return n?o:void 0}(this,a)}init(e){this.challengePassed=!1,this.exampleField=0,this.password="",this.env=e,this.currentTarget=this.env.runtime._editingTarget,console.log(e.runtime),this.passwordMap={storyTime:"aliceInWonderland",aliceInWonderland:"dancingSprite",dancingSprite:"detectSmile",detectSmile:"followHand",followHand:"textClassification",textClassification:"You finished!"};const t=new URL(window.location.href),o=new URLSearchParams(t.search);console.log("params",o.get("level"));const n=o.get("level");this.level=n,this.sizeMap={},e.runtime.on("PROJECT_RUN_STOP",(()=>{if("storyTime"==n&&this.storyTime()&&(this.challengePassed=!0),"textClassification"==n&&this.textClassification()&&(this.challengePassed=!0),"aliceInWonderland"==n&&this.aliceSprite){this.aliceSprite.size-this.sizeMap[this.aliceSprite.sprite.name]==100&&this.aliceInWonderland()&&(this.challengePassed=!0)}})),e.runtime.on("PROJECT_RUN_START",(()=>{this.populateSizeArray(),this.aliceInWonderland(),"dancingSprite"==n&&this.dancingSprite()&&(this.challengePassed=!0)}));for(const t of e.runtime.targets)t.isStage&&(this.stage=t)}showPassword(e){const t=this.getPosition(e);return"detectSmile"==this.level?this.detectSmile()?this.passwordMap[this.level]:"NO":"followHand"==this.level?this.followHand()?(console.log(t[0],t[1]),t[0]>150&&t[1]>100?this.passwordMap[this.level]:"NO"):"NO":this.challengePassed?this.passwordMap[this.level]:"NO"}getStats(){return this.level}goToLevel(e){"aliceInWonderland"==e&&window.open("https://playground.raise.mit.edu/raise-conference/?level=dancingSprite&project=https://www.dropbox.com/scl/fi/3e2x09nq6at2tsi0vpdmb/ballerina.sb3?rlkey=07pgqu4l5ua04lqe81kgws9no&st=feg29s34&dl=0","_blank")}levelInformation(){this.openUI("Password")}nextLevel(){this.openUI("Level")}storyTime(){const e=[["event_whenflagclicked","looks_say","control_wait"],["event_whenflagclicked","looks_say"],["event_whenflagclicked","looks_sayforsecs"],["event_whenflagclicked","looks_sayforsecs","control_wait"]],t=[["event_whenflagclicked","control_wait","looks_say"],["event_whenflagclicked","control_wait","looks_sayforsecs"]],o=this.getTargets(),n={one:!1,two:!1};console.log(o);for(const s of o){if("Stage"!=s.sprite.name){console.log(s.sprite.name);const o=this.detectStacks(s),l=o.length>0&&this.hasCommonArray(o,e),r=o.length>0&&this.hasCommonArray(o,t);n.one=!!n.one||!!l&&(!l||!r),n.two=!!n.two||!!r&&(!l||!r)}}return console.log(n),n.one&&n.two}aliceInWonderland(){const e=[["event_whenflagclicked","control_repeat","looks_changesizeby"],["control_repeat","looks_changesizeby"],["event_whenflagclicked","control_repeat_until","looks_changesizeby"],["control_repeat_until","looks_changesizeby"]];let t=!1;const o=this.getTargets();for(const n of o){if("Stage"!=n.sprite.name){console.log(n.sprite.name);const o=this.detectStacks(n);t=o.length>0&&this.hasCommonArray(o,e),t&&(this.aliceSprite=n)}}return t}dancingSprite(){const e=[["event_whenflagclicked","sound_play","control_forever","control_wait","looks_nextcostume"],["sound_play","control_forever","control_wait","looks_nextcostume"],["event_whenflagclicked","sound_play","control_forever","looks_nextcostume","control_wait"],["sound_play","control_forever","looks_nextcostume","control_wait"],["event_whenflagclicked","sound_play","control_repeat","control_wait","looks_nextcostume"],["sound_play","control_repeat","control_wait","looks_nextcostume"],["event_whenflagclicked","sound_play","control_repeat","looks_nextcostume","control_wait"],["sound_play","control_repeat","looks_nextcostume","control_wait"]],t=this.getTargets();let o=!1;for(const n of t){if("Stage"!=n.sprite.name){console.log(n.sprite.name);const t=this.detectStacks(n),s=t.length>0&&this.hasCommonArray(t,e),l=this.getCostumeLength(n)>1;console.log(s,l),o=s&&l}}return o}followHand(){const e=[["event_whenflagclicked","control_forever","control_wait","poseHand_goToHandPart"],["event_whenflagclicked","control_forever","poseHand_goToHandPart","control_wait"],["event_whenflagclicked","control_forever","poseHand_goToHandPart"],["control_forever","poseHand_goToHandPart"],["control_forever","poseHand_goToHandPart","control_wait"],["control_forever","control_wait","poseHand_goToHandPart"]],t=this.getTargets();let o=!1;for(const n of t){if("Stage"!=n.sprite.name){console.log(n.sprite.name);const t=this.detectStacks(n);o=t.length>0&&this.hasCommonArray(t,e)}}return o}detectSmile(){const e=[["poseFace_affdexWhenExpression","looks_sayforsecs"]],t=this.getTargets();let o=!1;for(const n of t){if("Stage"!=n.sprite.name){console.log(n.sprite.name);const t=this.detectStacks(n);o=t.length>0&&this.hasCommonArray(t,e)}}return o}textClassification(){const e=[["sensing_askandwait","control_if","id","looks_sayforsecs"],["event_whenflagclicked","sensing_askandwait","control_if","id","looks_sayforsecs"],["sensing_askandwait","control_if_else","id","looks_sayforsecs"],["event_whenflagclicked","sensing_askandwait","control_if_else","id","looks_sayforsecs"]],t=this.getTargets();let o=!1;for(const n of t){if("Stage"!=n.sprite.name){console.log(n.sprite.name);const t=this.detectStacks(n),s=t.length>0&&this.hasCommonArray(t,e),l=s?t[this.getCommonArray(t,e)]:[];console.log(l);const r=l.find((e=>e.includes("id---")));console.log(r);const i=!!r&&this.getIfCondition(r.replace(/^id---/,""),this.getBlocks(n));o=s&&i}}return o}getBlocks(e){return e.blocks._blocks}detectStacks(e){const t=[],o=e.blocks._scripts,n=e.blocks._blocks;console.log("blocks",n);for(const e of o){const o=[];let s=n[e];if(o.push(s.opcode),"control_forever"==s.opcode||"control_repeat"==s.opcode){let e=s.inputs.SUBSTACK?s.inputs.SUBSTACK.block:null;s.next=e}for(;s.next;){if(s=n[s.next],o.push(s.opcode),"control_if"==s.opcode||"control_if_else"==s.opcode){o.push(`id---${s.id}`);let e=s.inputs.SUBSTACK?s.inputs.SUBSTACK.block:null;s.next=e}if("control_forever"==s.opcode||"control_repeat"==s.opcode){let e=s.inputs.SUBSTACK?s.inputs.SUBSTACK.block:null;s.next=e}}t.push(o)}return console.log("ALL STACKS",t),t}getIfCondition(e,t){let o,n,s=t[e].inputs.CONDITION.block;s=s?t[s]:null;let l=!1,r=!1;if(console.log(s),console.log(s.inputs),console.log(s.inputs.OPERAND1),s&&"operator_gt"==s.opcode?(o=s.inputs.OPERAND1.block,console.log(o),o=o?t[o]:null,console.log(o),n=s.inputs.OPERAND2.block,console.log(n),n=n?t[n]:null,console.log(n),console.log("one")):s&&"operator_lt"==s.opcode&&(o=s.inputs.OPERAND2.block,o=o?t[o]:null,n=s.inputs.OPERAND1.block,n=n?t[n]:null),console.log(o,n),o&&"textClassification_sentimentScore"==o.opcode){console.log("passed 1");let e=o.inputs.TEXT.block;e=e?t[e]:null,e&&"sensing_answer"==e.opcode&&(console.log("passed 2"),l=!0)}return n&&"text"==n.opcode&&(console.log("passed 3"),"0"==n.fields.TEXT.value&&(console.log("passed 4"),r=!0)),console.log("operand1",l,"operand2",r),l&&r}getCostumeLength(e){return e.sprite.costumes.length}getPosition(e){return[e.thread.target.x,e.thread.target.y]}getTargets(){return this.env.runtime.targets}arraysEqual(e,t){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(e[o]!==t[o])if("id"==e[o]&&t[o].includes("id---"));else if("id"!=t[o]||!e[o].includes("id---"))return!1;return!0}hasCommonArray(e,t){console.log(e);for(let o=0;o<e.length;o++)for(let n=0;n<t.length;n++)if(this.arraysEqual(e[o],t[n]))return!0;return!1}getCommonArray(e,t){console.log(e);for(let o=0;o<e.length;o++)for(let n=0;n<t.length;n++)if(this.arraysEqual(e[o],t[n]))return o;return!1}populateSizeArray(){const e=this.getTargets();for(const t of e){const e=t.sprite.name,o=t.size;this.sizeMap[e]=o}}},(()=>{var c;const d="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(c=i[Symbol.metadata])&&void 0!==c?c:null):void 0;o=[t.scratch.reporter`Show password`],n=[t.scratch.reporter`Get level`],s=[t.scratch.command`Go to next level ${{type:"string",defaultValue:"password"}}`],l=[t.scratch.button`Get password information`],r=[t.scratch.button`Get level information`],M(e,0,o,{kind:"method",name:"showPassword",static:!1,private:!1,access:{has:e=>"showPassword"in e,get:e=>e.showPassword},metadata:d},null,a),M(e,0,n,{kind:"method",name:"getStats",static:!1,private:!1,access:{has:e=>"getStats"in e,get:e=>e.getStats},metadata:d},null,a),M(e,0,s,{kind:"method",name:"goToLevel",static:!1,private:!1,access:{has:e=>"goToLevel"in e,get:e=>e.goToLevel},metadata:d},null,a),M(e,0,l,{kind:"method",name:"levelInformation",static:!1,private:!1,access:{has:e=>"levelInformation"in e,get:e=>e.levelInformation},metadata:d},null,a),M(e,0,r,{kind:"method",name:"nextLevel",static:!1,private:!1,access:{has:e=>"nextLevel"in e,get:e=>e.nextLevel},metadata:d},null,a),d&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d})})(),e})();return e.Extension=F,e.Level=class extends N{constructor(e){super(),L(this,e,D,B,i,{extension:0,close:2},W)}},e.Password=class extends N{constructor(e){super(),L(this,e,U,q,i,{extension:5,close:0},R)}},e}({},ExtensionFramework);//# sourceMappingURL=raiseprg45grpconference.js.map
