var raiseprg45grpconference=function(e,t){"use strict";function o(e,t,o,n,s,l){function r(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var i,a=n.kind,c="getter"===a?"get":"setter"===a?"set":"value",d=e?n.static?e:e.prototype:null,h=d?Object.getOwnPropertyDescriptor(d,n.name):{},g=!1,p=o.length-1;p>=0;p--){var f={};for(var u in n)f[u]="access"===u?{}:n[u];for(var u in n.access)f.access[u]=n.access[u];f.addInitializer=function(e){if(g)throw new TypeError("Cannot add initializers after decoration has completed");l.push(r(e||null))};var _=(0,o[p])("accessor"===a?{get:h.get,set:h.set}:h[c],f);if("accessor"===a){if(void 0===_)continue;if(null===_||"object"!=typeof _)throw new TypeError("Object expected");(i=r(_.get))&&(h.get=i),(i=r(_.set))&&(h.set=i),(i=r(_.init))&&s.unshift(i)}else(i=r(_))&&("field"===a?s.unshift(i):h[c]=i)}d&&Object.defineProperty(d,n.name,h),g=!0}"function"==typeof SuppressedError&&SuppressedError;const n={name:"RAISE Conference",description:"Replace me with a description of your extension",iconURL:"Replace with the name of your icon image file (which should be placed in the same directory as this file)",insetIconURL:"Replace with the name of your inset icon image file (which should be placed in the same directory as this file)"};let s=(()=>{var e;let s,l,r=t.extension(n),i=[];return e=class extends r{constructor(){super(...arguments),this.password=function(e,t,o){for(var n=arguments.length>2,s=0;s<t.length;s++)o=n?t[s].call(e,o):t[s].call(e);return n?o:void 0}(this,i)}init(e){this.challengePassed=!1,this.exampleField=0,this.password="",this.env=e,this.currentTarget=this.env.runtime._editingTarget,this.passwordMap={storyTime:"aliceInWonderland",aliceInWonderland:"dancingSprite",dancingSprite:"detectSmile",detectSmile:"followHand",followHand:"textClassification",textClassification:"You finished!"};const t=new URL(window.location.href),o=new URLSearchParams(t.search);console.log("params",o.get("level"));const n=o.get("level");this.level=n,this.sizeMap={},e.runtime.on("PROJECT_RUN_STOP",(()=>{if("storyTime"==n&&this.storyTime()&&(this.challengePassed=!0),"textClassification"==n&&this.textClassification()&&(this.challengePassed=!0),"aliceInWonderland"==n&&this.aliceSprite){this.aliceSprite.size-this.sizeMap[this.aliceSprite.sprite.name]==100&&this.aliceInWonderland()&&(this.challengePassed=!0)}})),e.runtime.on("PROJECT_RUN_START",(()=>{this.populateSizeArray(),this.aliceInWonderland(),"dancingSprite"==n&&this.dancingSprite()&&(this.challengePassed=!0)}));for(const t of e.runtime.targets)t.isStage&&(this.stage=t)}showPassword(e){const t=this.getPosition(e);return"detectSmile"==this.level?this.detectSmile()?this.passwordMap[this.level]:"NO":"followHand"==this.level?this.followHand()?(console.log(t[0],t[1]),t[0]>150&&t[1]>100?this.passwordMap[this.level]:"NO"):"NO":this.challengePassed?this.passwordMap[this.level]:"NO"}getStats(){return this.level}storyTime(){const e=[["event_whenflagclicked","looks_say","control_wait"],["event_whenflagclicked","looks_say"],["event_whenflagclicked","looks_sayforsecs"],["event_whenflagclicked","looks_sayforsecs","control_wait"]],t=[["event_whenflagclicked","control_wait","looks_say"],["event_whenflagclicked","control_wait","looks_sayforsecs"]],o=this.getTargets(),n={one:!1,two:!1};console.log(o);for(const s of o){if("Stage"!=s.sprite.name){console.log(s.sprite.name);const o=this.detectStacks(s),l=o.length>0&&this.hasCommonArray(o,e),r=o.length>0&&this.hasCommonArray(o,t);n.one=!!n.one||!!l&&(!l||!r),n.two=!!n.two||!!r&&(!l||!r)}}return console.log(n),n.one&&n.two}aliceInWonderland(){const e=[["event_whenflagclicked","control_repeat","looks_changesizeby"],["control_repeat","looks_changesizeby"],["event_whenflagclicked","control_repeat_until","looks_changesizeby"],["control_repeat_until","looks_changesizeby"]];let t=!1;const o=this.getTargets();for(const n of o){if("Stage"!=n.sprite.name){console.log(n.sprite.name);const o=this.detectStacks(n);t=o.length>0&&this.hasCommonArray(o,e),t&&(this.aliceSprite=n)}}return t}dancingSprite(){const e=[["event_whenflagclicked","sound_play","control_forever","control_wait","looks_nextcostume"],["sound_play","control_forever","control_wait","looks_nextcostume"],["event_whenflagclicked","sound_play","control_forever","looks_nextcostume","control_wait"],["sound_play","control_forever","looks_nextcostume","control_wait"],["event_whenflagclicked","sound_play","control_repeat","control_wait","looks_nextcostume"],["sound_play","control_repeat","control_wait","looks_nextcostume"],["event_whenflagclicked","sound_play","control_repeat","looks_nextcostume","control_wait"],["sound_play","control_repeat","looks_nextcostume","control_wait"]],t=this.getTargets();let o=!1;for(const n of t){if("Stage"!=n.sprite.name){console.log(n.sprite.name);const t=this.detectStacks(n),s=t.length>0&&this.hasCommonArray(t,e),l=this.getCostumeLength(n)>1;console.log(s,l),o=s&&l}}return o}followHand(){const e=[["event_whenflagclicked","control_forever","control_wait","poseHand_goToHandPart"],["event_whenflagclicked","control_forever","poseHand_goToHandPart","control_wait"],["event_whenflagclicked","control_forever","poseHand_goToHandPart"],["control_forever","poseHand_goToHandPart"],["control_forever","poseHand_goToHandPart","control_wait"],["control_forever","control_wait","poseHand_goToHandPart"]],t=this.getTargets();let o=!1;for(const n of t){if("Stage"!=n.sprite.name){console.log(n.sprite.name);const t=this.detectStacks(n);o=t.length>0&&this.hasCommonArray(t,e)}}return o}detectSmile(){const e=[["poseFace_affdexWhenExpression","looks_sayforsecs"]],t=this.getTargets();let o=!1;for(const n of t){if("Stage"!=n.sprite.name){console.log(n.sprite.name);const t=this.detectStacks(n);o=t.length>0&&this.hasCommonArray(t,e)}}return o}textClassification(){const e=[["sensing_askandwait","control_if","id","looks_sayforsecs"],["event_whenflagclicked","sensing_askandwait","control_if","id","looks_sayforsecs"],["sensing_askandwait","control_if_else","id","looks_sayforsecs"],["event_whenflagclicked","sensing_askandwait","control_if_else","id","looks_sayforsecs"]],t=this.getTargets();let o=!1;for(const n of t){if("Stage"!=n.sprite.name){console.log(n.sprite.name);const t=this.detectStacks(n),s=t.length>0&&this.hasCommonArray(t,e),l=s?t[this.getCommonArray(t,e)]:[];console.log(l);const r=l.find((e=>e.includes("id---")));console.log(r);const i=!!r&&this.getIfCondition(r.replace(/^id---/,""),this.getBlocks(n));o=s&&i}}return o}getBlocks(e){return e.blocks._blocks}detectStacks(e){const t=[],o=e.blocks._scripts,n=e.blocks._blocks;console.log("blocks",n);for(const e of o){const o=[];let s=n[e];if(o.push(s.opcode),"control_forever"==s.opcode||"control_repeat"==s.opcode){let e=s.inputs.SUBSTACK?s.inputs.SUBSTACK.block:null;s.next=e}for(;s.next;){if(s=n[s.next],o.push(s.opcode),"control_if"==s.opcode||"control_if_else"==s.opcode){o.push(`id---${s.id}`);let e=s.inputs.SUBSTACK?s.inputs.SUBSTACK.block:null;s.next=e}if("control_forever"==s.opcode||"control_repeat"==s.opcode){let e=s.inputs.SUBSTACK?s.inputs.SUBSTACK.block:null;s.next=e}}t.push(o)}return console.log("ALL STACKS",t),t}getIfCondition(e,t){let o,n,s=t[e].inputs.CONDITION.block;s=s?t[s]:null;let l=!1,r=!1;if(console.log(s),console.log(s.inputs),console.log(s.inputs.OPERAND1),s&&"operator_gt"==s.opcode?(o=s.inputs.OPERAND1.block,console.log(o),o=o?t[o]:null,console.log(o),n=s.inputs.OPERAND2.block,console.log(n),n=n?t[n]:null,console.log(n),console.log("one")):s&&"operator_lt"==s.opcode&&(o=s.inputs.OPERAND2.block,o=o?t[o]:null,n=s.inputs.OPERAND1.block,n=n?t[n]:null),console.log(o,n),o&&"textClassification_sentimentScore"==o.opcode){console.log("passed 1");let e=o.inputs.TEXT.block;e=e?t[e]:null,e&&"sensing_answer"==e.opcode&&(console.log("passed 2"),l=!0)}return n&&"text"==n.opcode&&(console.log("passed 3"),"0"==n.fields.TEXT.value&&(console.log("passed 4"),r=!0)),console.log("operand1",l,"operand2",r),l&&r}getCostumeLength(e){return e.sprite.costumes.length}getPosition(e){return[e.thread.target.x,e.thread.target.y]}getTargets(){return this.env.runtime.targets}arraysEqual(e,t){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(e[o]!==t[o])if("id"==e[o]&&t[o].includes("id---"));else if("id"!=t[o]||!e[o].includes("id---"))return!1;return!0}hasCommonArray(e,t){console.log(e);for(let o=0;o<e.length;o++)for(let n=0;n<t.length;n++)if(this.arraysEqual(e[o],t[n]))return!0;return!1}getCommonArray(e,t){console.log(e);for(let o=0;o<e.length;o++)for(let n=0;n<t.length;n++)if(this.arraysEqual(e[o],t[n]))return o;return!1}populateSizeArray(){const e=this.getTargets();for(const t of e){const e=t.sprite.name,o=t.size;this.sizeMap[e]=o}}},(()=>{var n;const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(n=r[Symbol.metadata])&&void 0!==n?n:null):void 0;s=[t.scratch.reporter`Show password`],l=[t.scratch.reporter`Get level`],o(e,0,s,{kind:"method",name:"showPassword",static:!1,private:!1,access:{has:e=>"showPassword"in e,get:e=>e.showPassword},metadata:a},null,i),o(e,0,l,{kind:"method",name:"getStats",static:!1,private:!1,access:{has:e=>"getStats"in e,get:e=>e.getStats},metadata:a},null,i),a&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})})(),e})();return e.Extension=s,e}({},ExtensionFramework);//# sourceMappingURL=raiseprg45grpconference.js.map
